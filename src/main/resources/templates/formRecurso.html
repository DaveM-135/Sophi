<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="layout/layout::head"></head>

<body id="page-top">
<input id="authGetName" type="hidden" th:value="${#authentication.getName()}"></input>
  <!-- Page Wrapper -->
  <div id="wrapper">

     <!-- Sidebar -->
    <ul th:replace="layout/layout::menu"> </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

         <header th:replace="layout/layout :: header"></header>
         
        <!-- Begin Page Content -->
        <div class="container-fluid">

          <!-- Page Heading -->
          <h1 class="h3 mb-2 text-gray-800">Alta/Edici&oacute;n de recurso</h1>
          <!-- <p class="mb-4">Completa la informaci&oacute;n del nuevo recurso.</p> -->
			
			<form th:action="@{/formRecurso}" th:Object="${recurso}" method="post" enctype="multipart/form-data">
			
				<div class="card shadow mb-4">
					<!-- Card Header - Accordion -->
					<a href="#collapseCardGenerales" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardGenerales">
						<h6 class="m-0 font-weight-bold text-primary">Datos generales</h6>
					</a>
					<!-- Card Content - Collapse -->
					<div class="collapse show" id="collapseCardGenerales">
						<div class="card-body">
						
						<div class="row">
							<div class="col-12 col-sm-12 col-md-4">
                              <div class="input-group">
                                  <div class="custom-file">
                                      <input type="file" name="fotoPerfil" class="custom-file-input" id="inputFotoPerfilFile">
                                      <label class="custom-file-label">Foto personal</label>
                                  </div>
                              </div>
                              <small th:if="${recurso.foto} != null" th:text="' Ya hay una foto asociada'" style="color: green;"></small>
                          	</div>
						</div>
						

							<div class="row">
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Nombre*</label>
									<input type="text" th:field="*{descRecurso}" class="form-control" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descRecurso')}" th:errors="*{descRecurso}"></small>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Ap. Paterno*</label>
									<input type="text" th:field="*{descApellidoPaterno}" class="form-control" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descApellidoPaterno')}" th:errors="*{descApellidoPaterno}"></small>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Ap. Materno</label>
									<input type="text" th:field="*{descApellidoMaterno}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Tel. particular*</label>
<!-- 									<input type="tel" th:field="*{descTelCelular}" class="form-control telefono" maxlength="10" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('N&uacute;mero inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="(\d{2,3})(-)(\d{3,4})(-)(\d{4})" required/> -->
									<input type="tel" th:field="*{descTelCelular}" class="form-control telefono" maxlength="10" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('N&uacute;mero inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descTelCelular')}" th:errors="*{descTelCelular}"></small>
								</div>
							</div>
							
							<div class="row">
							<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Fecha ingreso*</label>
									<input type="date" th:field="*{fecIngresoEmpresa}" class="form-control" placeholder="AAAA-MM-DD" th:errorclass="'form-control alert-danger'"/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('fecIngresoEmpresa')}" th:errors="*{fecIngresoEmpresa}"></small>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Correo*</label>
									<input type="text" th:field="*{descCorreoElectronico}" class="form-control" th:errorclass="'form-control alert-danger'" pattern="^\S{1,}@\S{2,}\.\S{2,}$" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descCorreoElectronico')}" th:errors="*{descCorreoElectronico}"></small>
								</div>
								<div class="form-group col-8 col-md-3">
									<label class="col-form-label">Tel. empresa</label>
<!-- 									<input type="tel" th:field="*{descTelEmpresa}" class="form-control telefono"  maxlength="10" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('N&uacute;mero inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="(\d{2,3})(-)(\d{3,4})(-)(\d{4})"/> -->
									<input type="tel" th:field="*{descTelEmpresa}" class="form-control telefono"  maxlength="10" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('N&uacute;mero inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}"/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descTelEmpresa')}" th:errors="*{descTelEmpresa}"></small>
								</div>
								<div class="form-group col-4 col-md-2">
									<label class="col-form-label">Tel. ext.</label>
									<input type="text" th:field="*{descTelExt}" class="form-control"  maxlength="5" th:errorclass="'form-control alert-danger'"/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descTelExt')}" th:errors="*{descTelExt}"></small>
								</div>
							</div>
							
							<div class="row">
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Fecha nacimiento*</label>
									<input type="date" th:field="*{fecNacimiento}" class="form-control" placeholder="AAAA-MM-DD" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('fecNacimiento')}" th:errors="*{fecNacimiento}"></small>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">RFC*</label>
									<input type="text" th:field="*{descRfc}" class="form-control" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('RFC con homoclave inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="([A-Z,ï¿½,&]{3,4}([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[A-Z|\d]{3})" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descRfc')}" th:errors="*{descRfc}"></small>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">CURP*</label>
									<input type="text" th:field="*{descCurp}" class="form-control" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('CURP inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descCurp')}" th:errors="*{descCurp}"></small>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">NSS*</label>
									<input type="text" th:field="*{descNss}" class="form-control" maxlength="11" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('NSS inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="[0-9]{11}"/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('descNss')}" th:errors="*{descNss}"></small>
								</div>
							</div>
							
							<div class="row">
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Calle*</label>
									<input type="text" th:field="*{dirCalle}" class="form-control" maxlength="40" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('dirCalle')}" th:errors="*{dirCalle}"></small>
								</div>
								<div class="form-group col-6 col-md-2">
									<label class="col-form-label">Num. exterior</label>
									<input type="text" th:field="*{dirNumeroExt}" class="form-control" maxlength="5"/>
								</div>
								<div class="form-group col-6 col-md-2">
									<label class="col-form-label">Num. interior</label>
									<input type="text" th:field="*{dirNumeroInt}" class="form-control" maxlength="5"/>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Colonia*</label>
									<input type="text" th:field="*{dirColonia}" class="form-control" maxlength="20" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('dirColonia')}" th:errors="*{dirColonia}"></small>
								</div>
							</div>
							
							<div class="row">
								<div class="form-group col-4 col-md-2">
									<label class="col-form-label">C.P.*</label>
									<input type="text" th:field="*{dirCp}" class="form-control" th:errorclass="'form-control alert-danger'" oninvalid="setCustomValidity('CURP inv&aacute;lido')" onchange="try{setCustomValidity('')}catch(e){}" pattern="[0-9]{5}" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('dirCp')}" th:errors="*{dirCp}"></small>
								</div>
								<div class="form-group col-8 col-md-5">
									<label class="col-form-label">Municipio*</label>
									<input type="text" th:field="*{dirAlcaldiaMunicipio}" class="form-control" maxlength="40" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('dirAlcaldiaMunicipio')}" th:errors="*{dirAlcaldiaMunicipio}"></small>
								</div>
								<div class="form-group col-12 col-md-5">
									<label class="col-form-label">Estado*</label>
									<input type="text" th:field="*{dirEstado}" class="form-control"  maxlength="20" th:errorclass="'form-control alert-danger'" required/>
									<small class="form-text text-danger" th:if="${#fields.hasErrors('dirEstado')}" th:errors="*{dirEstado}"></small>
								</div>
							</div>
							
							<div class="row">
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Puesto</label>
<!-- 									<input type="text" th:field="*{codPuesto}" class="form-control"/> -->
										<div class="input-group">
											<select th:field="*{codPuesto}" class="custom-select">
<!-- 												<option>-- Seleccione --</option> -->
		      									<option th:each="puesto : ${puestoList}" 
		      									th:value="${puesto.codPuesto}" th:text="${puesto.descPuesto}">
		      									</option>
		   									</select>
		   								</div>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Jornada</label>
<!-- 									<input type="text" th:field="*{codJornada}" class="form-control"/> -->
										<div class="input-group">
											<select th:field="*{codJornada}" class="custom-select">
<!-- 												<option value="NONE">-- Seleccione --</option> -->
		      									<option th:each="jornada : ${jornadaList}" 
		      									th:value="${jornada.codJornada}" th:text="${jornada.descJornada}">
		      									</option>
		   									</select>
		   								</div>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Tipo</label>
<!-- 									<input type="text" th:field="*{codTipoRecurso}" class="form-control"/> -->
										<div class="input-group">
											<select th:field="*{codTipoRecurso}" class="custom-select">
<!-- 												<option value="NONE">-- Seleccione --</option> -->
		      									<option th:each="tipoRecurso : ${tipoRecursoList}" 
		      									th:value="${tipoRecurso.codTipoRecurso}" th:text="${tipoRecurso.descTipoRecurso}">
		      									</option>
		   									</select>
		   								</div>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Proveedor</label>
<!-- 									<input type="text" th:field="*{codProveedor}" class="form-control"/> -->
										<div class="input-group">
											<select th:field="*{codProveedor}" class="custom-select">
<!-- 												<option value="NONE">-- Seleccione --</option> -->
		      									<option th:each="proveedor : ${proveedorList}" 
		      									th:value="${proveedor.codProveedor}" th:text="${proveedor.descProveedor}">
		      									</option>
		   									</select>
		   								</div>
								</div>
							</div>
							
							<div class="row">
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Grado escolaridad</label>
									<input type="text" th:field="*{descEduGradoEscolaridad}" class="form-control" maxlength="20"/>
								</div>
								<div class="form-group col-12 col-md-2">
									<label class="col-form-label">Etapa</label>
<!-- 									<input type="text" th:field="*{descEduEtapa}" class="form-control" maxlength="20"/> -->
										<div class="input-group">
											<select th:field="*{descEduEtapa}" class="custom-select">
												<option value="NONE">-- Seleccione --</option>
		      									<option th:each="entry : ${etapaList.entrySet()}" 
		      									th:value="${entry.key}" th:text="${entry.value}">
		      									</option>
		   									</select>
		   								</div>
								</div>

								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Inst. acad&eacute;mica</label>
									<input type="text" th:field="*{descEduInstitucionAcademica}" class="form-control" maxlength="60"/>
								</div>
								<div class="form-group col-12 col-md-3">
									<label class="col-form-label">Doc. obtenido</label>
									<input type="text" th:field="*{descEduDocumentoObtenido}" class="form-control" maxlength="40"/>
								</div>
							</div>
					
						</div>
					</div>
					
					
					<!-- Card Header - Accordion -->
					<a href="#collapseCardSueldosPrestaciones" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardSueldosPrestaciones">
						<h6 class="m-0 font-weight-bold text-primary">Sueldos y prestaciones</h6>
					</a>
					<!-- Card Content - Collapse -->
					<div class="collapse show" id="collapseCardSueldosPrestaciones">
						<div class="card-body">
						
							<div class="row">
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Costo m&iacute;nimo</label>
									<input type="text" th:field="*{valCostoMinimo}" class="form-control"/>
								</div>
							</div>

							<div class="row">
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Banco</label>
									<input type="text" th:field="*{descBancoNombre}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">No. cuenta</label>
									<input type="text" th:field="*{descBancoNumeroCuenta}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Cta. Clabe</label>
									<input type="text" th:field="*{descBancoClabe}" class="form-control"/>
								</div>
							</div>
							
						</div>
					</div>
					
					<!-- Card Header - Accordion -->
					<a href="#collapseCardMedicos" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardMedicos">
						<h6 class="m-0 font-weight-bold text-primary">Antecedentes m&eacute;dicos</h6>
					</a>
					<!-- Card Content - Collapse -->
					<div class="collapse show" id="collapseCardMedicos">
						<div class="card-body">

							<div class="row">
								<div class="form-group col-12 col-md-2">
									<label class="col-form-label">Tipo sangre</label>
									<input type="text" th:field="*{descMedicosTipoSangre}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Alergias</label>
									<input type="text" th:field="*{descMedicosAlergias}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-2">
									<label class="col-form-label">Embarazos</label>
									<input type="text" th:field="*{descMedicosEmbarazos}" class="form-control"/>
								</div>
								<div class="form-group col-12 col-md-4">
									<label class="col-form-label">Cirug&iacute;as</label>
									<input type="text" th:field="*{descMedicosCirugias}" class="form-control"/>
								</div>
							</div>
							<div class="row">
								<div class="form-group col-12 col-md-12">
									<label class="col-form-label">Descripci&oacute;n de enfermedades</label>
									<input type="text" th:field="*{descMedicosEnfermedades}" class="form-control" />
								</div>
							</div>
						</div>
					</div>
					
					
					<!-- Card Header - Accordion -->
					<a href="#collapseCardAdicionales" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardAdicionales">
						<h6 class="m-0 font-weight-bold text-primary">Datos adicionales</h6>
					</a>
					<!-- Card Content - Collapse -->
					<div class="collapse show" id="collapseCardAdicionales">
						<div class="card-body">

							<div class="row">
								<div class="form-group col-8 col-md-6">
									<label class="col-form-label">Estado Civil</label>
									<input type="text" th:field="*{descEstadoCivil}" class="form-control"/>
								</div>
								<div class="form-group col-4 col-md-2">
									<label class="col-form-label">N&uacute;mero hijos</label>
									<input type="text" th:field="*{valNumeroHijos}" class="form-control"/>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Card Header - Accordion -->
					<a th:if="${recurso.codRecurso!=null}" href="#collapseCardExtraComplementaria" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardExtraComplementaria">
						<h6 class="m-0 font-weight-bold text-primary">Extra</h6>
					</a>
					<!-- Card Content - Collapse -->
					<div th:if="${recurso.codRecurso!=null}"  class="collapse show" id="collapseCardExtraComplementaria">
						<div class="card-body">

							<table class="table-responsive">
							<tr>
							<td>
							<div class="card" style="width: 100%;">
							  <img th:src="@{/img/img-contacto-emergencia.png}" class="card-img-top" alt="Contactos de emergencia">
							  <div class="card-body">
							    <h5 class="card-title">Contactos de emergencia</h5>
							    <p class="card-text">Informaci&oacute;n que describe este apartado.</p>
							    <a th:href="@{/listarContactosEmergencia/} +  ${recurso.codRecurso}" class="btn btn-primary stretched-link">Ver</a>
							  </div>
							</div>
							</td>
							<td>
							<div class="card" style="width: 100%;">
							  <img th:src="@{/img/img-herramienta.png}" class="card-img-top" alt="Contactos de emergencia">
							  <div class="card-body">
							    <h5 class="card-title">Herramientas</h5>
							     <p class="card-text">Informaci&oacute;n que describe este apartado.</p>
							    <a th:href="@{/listarHerramientas/} +  ${recurso.codRecurso}" class="btn btn-primary stretched-link">Ver</a>
<!-- 							    <table> -->
<!-- 							    <tr th:each="herramienta : ${recurso.herramientas}"> -->
<!-- 							    <td th:text="${herramienta.descHerramienta}"></td> -->
<!-- 							    <td th:text="${herramienta.descNumeroSerie}"></td> -->
<!-- 							    <td th:text="${herramienta.codHerramienta}"></td> -->
<!-- 							    </tr> -->
<!-- 							    </table> -->
							  </div>
							</div>
							</td>
							<td>
							<div class="card" style="width: 100%;">
							  <img th:src="@{/img/img-sueldo-prestacion.png}" class="card-img-top" alt="Contactos de emergencia">
							  <div class="card-body">
							    <h5 class="card-title">Sueldos y prestaciones</h5>
							     <p class="card-text">Informaci&oacute;n que describe este apartado.</p>
							    <a th:href="@{/listarSueldos/} +  ${recurso.codRecurso}" class="btn btn-primary stretched-link">Ver</a>
							  </div>
							</div>
							</td>
							<td>
							<div class="card" style="width: 100%;">
							  <img th:src="@{/img/img-dependientes-economicos.png}" class="card-img-top" alt="Contactos de emergencia">
							  <div class="card-body">
							    <h5 class="card-title">Dependientes econ&oacute;micos</h5>
							     <p class="card-text">Informaci&oacute;n que describe este apartado.</p>
							    <a th:href="@{/listarDependientes/} +  ${recurso.codRecurso}" class="btn btn-primary stretched-link">Ver</a>
							  </div>
							</div>
							</td>
							</tr>
							</table>

						</div>
					</div>
					
				</div>
				
				<div class="row">
					<div class="col-sm-6">
						<input type="submit" value="Guardar" class="btn btn-primary"/>
						<a sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_RH')" class="btn btn-secondary" th:href="@{/listarRecursos}">Cancelar</a>
						<a sec:authorize="hasAnyRole('ROLE_USER','ROLE_LIDER')" class="btn btn-secondary" th:href="@{/verRecurso/} + ${recurso.codRecurso}">Cancelar</a>
					</div>
				</div>

				<input type="hidden" th:field="*{codRecurso}"/>
				
			</form>

		</div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

       <!-- Footer -->
      <footer th:replace="layout/layout :: footer"></footer>
      <!-- End of Footer -->


    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button--> <div class="st-actionContainer right-bottom" id="btnFlash"> <div class="st-btn-container right-bottom" onclick="flashSurvey(); return false;"> <div class="st-button-main"><i class="fa fa-bolt" aria-hidden="true"></i></div> </div> </div>
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

	 <!-- ModalLogout -->
      <footer th:replace="layout/layout :: modalLogout"></footer>
      <!-- End ModalLogout -->

  <!-- Bootstrap core JavaScript-->
  <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
  <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

  <!-- Core plugin JavaScript-->
  <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

  <!-- Custom scripts for all pages-->
  <script th:src="@{/js/sb-admin-2.min.js}"></script>

  <!-- Page level plugins -->
  <script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
  <script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>

  <!-- Page level custom scripts -->
  <script th:src="@{/js/demo/datatables-demo.js}"></script>
  
  <script th:src="@{/js/datosRecursoSesion.js}"></script>
  <script th:src="@{/js/phone.js}"></script>

</body>

</html>
